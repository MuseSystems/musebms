<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.30.9">
    <meta name="project" content="mscmp_syst_perms v0.1.0">

    <title>MscmpSystPerms.Protocol â€” mscmp_syst_perms v0.1.0</title>
    <link rel="stylesheet" href="dist/html-elixir-XFYN5IVA.css" />


    <script src="dist/handlebars.runtime-NWIB6V2M.js"></script>
    <script src="dist/handlebars.templates-EPF2X7PV.js"></script>
    <script src="dist/sidebar_items-FA0400B7.js"></script>

      <script src="docs_config.js"></script>

    <script async src="dist/html-J2ASZTQE.js"></script>


  </head>
  <body data-type="modules" class="page-protocol">
    <script>

      try {
        var settings = JSON.parse(localStorage.getItem('ex_doc:settings') || '{}');

        if (settings.theme === 'dark' ||
           ((settings.theme === 'system' || settings.theme == null) &&
             window.matchMedia('(prefers-color-scheme: dark)').matches)
           ) {
          document.body.classList.add('dark')
        }
      } catch (error) { }
    </script>

<div class="main">

<button class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">
  <form class="sidebar-search" action="search.html">
    <label class="search-label">
      <span class="sr-only">Search documentation of mscmp_syst_perms</span>
      <input name="q" type="text" class="search-input" placeholder="Search..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
    </label>
    <button type="submit" class="search-button" aria-label="Submit Search">
      <i class="ri-search-2-line" aria-hidden="true" title="Submit search"></i>
    </button>
    <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
      <i class="ri-close-line ri-lg" title="Cancel search"></i>
    </button>
  </form>

  <div class="autocomplete">
    <div class="autocomplete-results">
    </div>
  </div>

  <div class="sidebar-header">

    <div class="sidebar-projectDetails">
      <a href="MscmpSystPerms.html" class="sidebar-projectName" translate="no">
mscmp_syst_perms
      </a>
      <div class="sidebar-projectVersion" translate="no">
        v0.1.0
      </div>
    </div>
    <ul id="sidebar-listNav" class="sidebar-listNav" role="tablist">
      <li>
        <button id="extras-list-tab-button" role="tab" data-type="extras" aria-controls="extras-tab-panel" aria-selected="true" tabindex="0">
Pages
        </button>
      </li>

        <li>
          <button id="modules-list-tab-button" role="tab" data-type="modules" aria-controls="modules-tab-panel" aria-selected="false" tabindex="-1">
            Modules
          </button>
        </li>


    </ul>
  </div>

  <div id="extras-tab-panel" class="sidebar-tabpanel" role="tabpanel" aria-labelledby="extras-list-tab-button">
    <ul id="extras-full-list" class="full-list"></ul>
  </div>

    <div id="modules-tab-panel" class="sidebar-tabpanel" role="tabpanel" aria-labelledby="modules-list-tab-button" hidden>
      <ul id="modules-full-list" class="full-list"></ul>
    </div>


</nav>

<main class="content">
  <output role="status" id="toast"></output>
  <div class="content-outer">
    <div id="content" class="content-inner">

<h1>
<button class="icon-action display-settings">
  <i class="ri-settings-3-line"></i>
  <span class="sr-only">Settings</span>
</button>


  <span translate="no">MscmpSystPerms.Protocol</span> <small>protocol</small>
  <small class="app-vsn" translate="no">(mscmp_syst_perms v0.1.0)</small>

</h1>


  <section id="moduledoc">
<p>Defines a common API for the various higher level implementations which use
<a href="MscmpSystPerms.html"><code class="inline">MscmpSystPerms</code></a> as a core for permission management.</p>
  </section>


  <section id="summary" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#summary">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Summary</span>
    </h1>
<div class="summary-types summary">
  <h2>
    <a href="#types">Types</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:t/0" translate="no">t()</a>

      </div>

        <div class="summary-synopsis"><p>All the types that implement this protocol.</p></div>

    </div>

</div>
<div class="summary-functions summary">
  <h2>
    <a href="#functions">Functions</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#get_effective_perm_grants/2" translate="no">get_effective_perm_grants(selector, opts)</a>

      </div>

        <div class="summary-synopsis"><p>Provides the effective Permissions/Rights/Scopes for the user context
identified by the <code class="inline">selector</code> as calculated from all effective grants and
revocations.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#grant_perm_role/2" translate="no">grant_perm_role(selector, perm_role_id)</a>

      </div>

        <div class="summary-synopsis"><p>Grants a Permission Role to the given selector.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#list_perm_denials/2" translate="no">list_perm_denials(selector, opts)</a>

      </div>

        <div class="summary-synopsis"><p>List all explicit denials of Permissions from the identified user context.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#list_perm_grants/2" translate="no">list_perm_grants(selector, opts)</a>

      </div>

        <div class="summary-synopsis"><p>Lists all of the Permission Role records granted to the user context
identified by the <code class="inline">selector</code>, including the Rights/Scopes of the grants.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#revoke_perm_role/2" translate="no">revoke_perm_role(selector, perm_role_id)</a>

      </div>

        <div class="summary-synopsis"><p>Revokes a previously granted Permission Role from the given selector.</p></div>

    </div>

</div>

  </section>


  <section id="types" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#types">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Types</span>
    </h1>
    <div class="types-list">
<section class="detail" id="t:t/0">

  <div class="detail-header">
    <a href="#t:t/0" class="detail-link" title="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature" translate="no">t()</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@type</span> t() :: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>()</pre>

      </div>

<p>All the types that implement this protocol.</p>
  </section>
</section>

    </div>
  </section>

  <section id="functions" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#functions">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Functions</span>
    </h1>
    <div class="functions-list">
<section class="detail" id="get_effective_perm_grants/2">

  <div class="detail-header">
    <a href="#get_effective_perm_grants/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">get_effective_perm_grants(selector, opts)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> get_effective_perm_grants(
  <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">struct</a>(),
  <a href="https://hexdocs.pm/elixir/Keyword.html#t:t/0">Keyword.t</a>()
) :: {:ok, <a href="MscmpSystPerms.Types.html#t:perm_grants/0">MscmpSystPerms.Types.perm_grants</a>()} | {:error, <a href="../../../../documentation/technical/app_server/mscmp_syst_error/MscmpSystError.html#t:t/0">MscmpSystError.t</a>()}</pre>

      </div>

<p>Provides the effective Permissions/Rights/Scopes for the user context
identified by the <code class="inline">selector</code> as calculated from all effective grants and
revocations.</p><p>This function answers the question, &quot;what rights does this user really have?&quot;</p><p>On successful execution, a success tuple is returned including a map of the
selected Permissions and the Rights/Scopes granted.  Errors will result in the
return of an error tuple.</p><h2 id="get_effective_perm_grants/2-parameters" class="section-heading">
  <a href="#get_effective_perm_grants/2-parameters" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Parameters</span>
</h2>
<ul><li><p><code class="inline">selector</code> - this value is a struct which determines the specific
implementation of this function to call and which contains the keys/values
to use in selecting which Permission and Permission Role Grant records to
retrieve.  Specific details about what records are involved and how the
selection return values are determine are implementation specific and will
be documented on a case-by-case basis.</p></li><li><p><code class="inline">opts</code> - a Keyword List of optional parameters which may be provided.  The
only general option is listed below, each specific implementation of this
function may extend the available options as appropriate to the
implementation.</p><ul><li><code class="inline">permissions</code> - a list of specific Permission names to lookup.  This is
usually supplied as a limiting filter; without this list the typical
behavior is to return all of the permissions for a given Permission
Functional Type filtered only by the <code class="inline">selector</code> data.  Again, the details
of the filtering or inclusion using this option will be implementation
specific and documented for each individual implementation.</li></ul></li></ul>
  </section>
</section>
<section class="detail" id="grant_perm_role/2">

  <div class="detail-header">
    <a href="#grant_perm_role/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">grant_perm_role(selector, perm_role_id)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> grant_perm_role(
  <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">struct</a>(),
  <a href="MscmpSystPerms.Types.html#t:perm_role_id/0">MscmpSystPerms.Types.perm_role_id</a>()
) :: :ok | {:error, <a href="../../../../documentation/technical/app_server/mscmp_syst_error/MscmpSystError.html#t:t/0">MscmpSystError.t</a>()}</pre>

      </div>

<p>Grants a Permission Role to the given selector.</p><p>On successful execution of the grant, the function will return a simple <code class="inline">:ok</code>.
On error, an error tuple is returned.</p><h2 id="grant_perm_role/2-parameters" class="section-heading">
  <a href="#grant_perm_role/2-parameters" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Parameters</span>
</h2>
<ul><li><p><code class="inline">selector</code> - this value is a struct which determines the specific
implementation of this function to call and which contains the keys/values
to use as the unique identifier of the user context to which you are
granting Permission Roles.</p></li><li><p><code class="inline">perm_role_id</code> - the record ID value of the Permission Role record which
you are granting to the user context identified by the <code class="inline">selector</code>.</p></li></ul>
  </section>
</section>
<section class="detail" id="list_perm_denials/2">

  <div class="detail-header">
    <a href="#list_perm_denials/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">list_perm_denials(selector, opts)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> list_perm_denials(
  <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">struct</a>(),
  <a href="https://hexdocs.pm/elixir/Keyword.html#t:t/0">Keyword.t</a>()
) :: {:ok, [<a href="Msdata.SystPerms.html#t:t/0">Msdata.SystPerms.t</a>()] | []} | {:error, <a href="../../../../documentation/technical/app_server/mscmp_syst_error/MscmpSystError.html#t:t/0">MscmpSystError.t</a>()}</pre>

      </div>

<p>List all explicit denials of Permissions from the identified user context.</p><p>An assumption made by this module is that Permission Roles are granted to
users as whole roles, but individual Permissions may be explicitly denied from
users on a Permission by Permission basis.  This function is intended to list
Permission denials for a user context so that the denials may be managed.</p><p>Some user contexts may not offer explicit Permission denials.  In these cases
this function should simply return a success tuple containing an empty list as
the value.</p><h2 id="list_perm_denials/2-parameters" class="section-heading">
  <a href="#list_perm_denials/2-parameters" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Parameters</span>
</h2>
<ul><li><p><code class="inline">selector</code> - this value is a struct which determines the specific
implementation of this function to call and which contains the keys/values
to use in selecting which Permission denial records to retrieve. Specific
details about what records are involved and how the selection return values
are determine are implementation specific and will be documented on a case-
by-case basis.</p></li><li><p><code class="inline">opts</code> - a Keyword List of optional parameters which may be provided.  The
only general option is listed below, each specific implementation of this
function may extend the available options as appropriate to the
implementation.</p></li></ul>
  </section>
</section>
<section class="detail" id="list_perm_grants/2">

  <div class="detail-header">
    <a href="#list_perm_grants/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">list_perm_grants(selector, opts)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> list_perm_grants(
  <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">struct</a>(),
  <a href="https://hexdocs.pm/elixir/Keyword.html#t:t/0">Keyword.t</a>()
) :: {:ok, [<a href="Msdata.SystPermRoles.html#t:t/0">Msdata.SystPermRoles.t</a>()]} | {:error, <a href="../../../../documentation/technical/app_server/mscmp_syst_error/MscmpSystError.html#t:t/0">MscmpSystError.t</a>()}</pre>

      </div>

<p>Lists all of the Permission Role records granted to the user context
identified by the <code class="inline">selector</code>, including the Rights/Scopes of the grants.</p><p>This function facilitates understanding what roles have been granted to user
and what Permissions/Rights/Scopes those roles grant to the user.  This list
is intended to be descriptive and not directly indicating the effective grants
applied to the user.  Typical uses of this function are to populate lists of
Permission Role Grants for the purposes of managing user access.</p><h2 id="list_perm_grants/2-parameters" class="section-heading">
  <a href="#list_perm_grants/2-parameters" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Parameters</span>
</h2>
<ul><li><p><code class="inline">selector</code> - this value is a struct which determines the specific
implementation of this function to call and which contains the keys/values
to use in selecting which Permission and Permission Role Grant records to
retrieve.  Specific details about what records are involved and how the
selection return values are determine are implementation specific and will
be documented on a case-by-case basis.</p></li><li><p><code class="inline">opts</code> - a Keyword List of optional parameters which may be provided.  The
only general option is listed below, each specific implementation of this
function may extend the available options as appropriate to the
implementation.</p><ul><li><code class="inline">include_perms</code> - a boolean option which, when set <code class="inline">true</code>, will preload
the <a href="Msdata.SystPermRoleGrants.html"><code class="inline">Msdata.SystPermRoleGrants</code></a> <code class="inline">perm</code> data.  The default value for this
option is <code class="inline">false</code>.</li></ul></li></ul>
  </section>
</section>
<section class="detail" id="revoke_perm_role/2">

  <div class="detail-header">
    <a href="#revoke_perm_role/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">revoke_perm_role(selector, perm_role_id)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> revoke_perm_role(
  <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">struct</a>(),
  <a href="MscmpSystPerms.Types.html#t:perm_role_id/0">MscmpSystPerms.Types.perm_role_id</a>()
) :: {:ok, :deleted | :not_found} | {:error, <a href="../../../../documentation/technical/app_server/mscmp_syst_error/MscmpSystError.html#t:t/0">MscmpSystError.t</a>()}</pre>

      </div>

<p>Revokes a previously granted Permission Role from the given selector.</p><p>On successful execution a success tuple is returned.  If the grant was
actually deleted this tuple will take the form <code class="inline">{:ok, :deleted}</code>.  If the
grant was not found for the user context identified by the <code class="inline">selector</code> then the
<code class="inline">{:ok, :not_found}</code> tuple will be returned.  Any other outcome is an error
resulting in an error tuple being returned.</p><h2 id="revoke_perm_role/2-parameters" class="section-heading">
  <a href="#revoke_perm_role/2-parameters" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Parameters</span>
</h2>
<ul><li><p><code class="inline">selector</code> - this value is a struct which determines the specific
implementation of this function to call and which contains the keys/values
to use as the unique identifier of the user context from which you are
revoking Permission Roles.</p></li><li><p><code class="inline">perm_role_id</code> - the record ID value of the Permission Role record which
you are revoking from the user context identified by the <code class="inline">selector</code>.</p></li></ul>
  </section>
</section>

    </div>
  </section>

      <footer class="footer">
        <p>

          <span class="line">
            <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
              Search HexDocs
            </button>

              <a href="mscmp_syst_perms.epub" title="ePub version">
                Download ePub version
              </a>

          </span>
        </p>

        <p class="built-using">
          Built using
          <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.30.9) for the

            <a href="https://elixir-lang.org" title="Elixir" target="_blank" translate="no">Elixir programming language</a>

        </p>
      </footer>
    </div>
  </div>
</main>
</div>


  </body>
</html>
